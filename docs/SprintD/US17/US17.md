# US 17 - Import Clinical tests from CSV file

## 1. Requirements Engineering


### 1.1. User Story Description

*As a laboratory coordinator, I want to import clinical tests from a CSV file*

### 1.2. Customer Specifications and Clarifications 


**From the Specifications Document:**

_Acceptance Criteria: If the file contains invalid data (e.g., a parameter not
defined in the system), that data should not be load into the system. An exception
should be thrown._


**From the client clarifications:**

* "Q1:Regarding US17, could you please clarify what "NHS_Code" and "NHS_Number" in the tests_CovidMATCP.csv file refers to? Does the NHS_Code refers to the test and the NHS_Number to the client?"


* "Q2:If the laboratory in the file doesn't exist on the system should it be created and registered in the application? If so how should we fill the other information related to a clinical analysis laboratory?"


* "Q3: However, when a client is not found should it be registered? Since we already have all needed information in the .CSV document.


### 1.3. Acceptance Criteria

* AC1: Cannot load data that is invalid.

### 1.4. Found out Dependencies

US4 - Receptionist register new test, US3 - Receptionist registers new client, this US's and the receptionist actor in specific as the capability of registering new information. 
If the information provided via the file needs to be created into the system, then the Lab Coordinator, Actor in this particular US, should do either: be able to register this new information or give instructions to the Receptionist in this order.
* If, according to information, every data of information not defined in the system cannot be created apart from the tests, then the whole function should revolve around reading from the file and give the information to a class, which would be responsible for bridging with the creator class of the type.

* If otherwise, besides from tests, also clients, can be created, then we should aproach the problem by creating first the clients and then importing the test.

### 1.5 Input and Output Data

**Input data**

* Typed : name of the file to be read.

**Output data**

* (In)Success of the operation

### 1.6. System Sequence Diagram (SSD)


![US17-SSD](US17-SSD.svg)


### 1.7 Other Relevant Remarks



## 2. OO Analysis

### 2.1. Relevant Domain Model Excerpt 

![US17-MD](US17-MD.svg)

### 2.2. Other Remarks


## 3. Design - User Story Realization 

### 3.1. Rationale

**The rationale grounds on the SSD interactions and the identified input/output data.**

| Interaction ID | Question: Which class is responsible for... | Answer  | Justification (with patterns)  |
|:-------------  |:--------------------- |:------------|:---------------------------- |
| Step 1  : starts import	 |	...Interacting with the Actor?	  |     ImportUI       |Pure Fabrication|
| Step 1  : starts import	 |	...Bridge between the UI and Domain Layer?	  | ImportController           |Controller|
| Step 2  : requests data (file name)	 |	n/a	  |            ||
| Step 3  : types requested data	 |...creates the import environment?	  |  LabCoordinator      |HC+LC:Because the actor responsible for this actions needs to be a user of our system we concluded that its better to attribute the responsability to this class. |            |
| Step 4  : shows information and requests confirmation		 |	...validate test information in file(system)?	  | TestStore           |IE:Knows all instances of tests.|
| Step 4  : shows information and requests confirmation		 |	...validate test information in file(locally)?	  | TestDto           |IE:Saves information of all tests before confirming with client|
| Step 4  : shows information and requests confirmation		 |	...validate clients information in file?	  | ClientStore           |IE: Knows all created instances of Clients|
| Step 5  : confirms the data		 |	...save tests information?	  | TestStore -> Test           |IE: The US to create test's is already done so this action after verifying that everything is right would be done with the help of those class's.|
| Step 6  : informs operation success	 |	...informing Actor?	  |   ImportUI         ||



### Systematization ##

According to the taken rationale, the conceptual classes promoted to software classes are: 

* Employee(LabCoordinator)
* Test
* Company

Other software classes (i.e. Pure Fabrication) identified: 
* ImportUI
* ImportController
* TestDto
* TestStore
* ClientStore



## 3.2. Sequence Diagram (SD)

####Main

![US17-SD](US17-SD.svg)

####Import Loop

![Import Loop](ImportLoop.svg)


####SaveLoop

![Save Loop](Save Loop.svg)



## 3.3. Class Diagram (CD)


![US17-CD](US17-CD.svg)

# 4. Tests 
*In this section, it is suggested to systematize how the tests were designed to allow a correct measurement of requirements fulfilling.* 

**_DO NOT COPY ALL DEVELOPED TESTS HERE_**


# 5. Construction (Implementation)


*It is also recommended organizing this content by subsections.* 




# 6. Integration and Demo 


# 7. Observations

Questions posed to client regarding every bit of operation of this US, either by our tem our by other teams. Waiting responses.

